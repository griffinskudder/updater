# Example configuration for the updater service
server:
  port: 8080
  host: "0.0.0.0"
  read_timeout: 30s
  write_timeout: 30s
  idle_timeout: 60s
  tls_enabled: false
  # Uncomment and set paths for HTTPS
  # tls_cert_file: "/path/to/cert.pem"
  # tls_key_file: "/path/to/key.pem"

storage:
  type: "json"
  path: "./data/releases.json"
  # Database configuration (when using database storage)
  database:
    driver: "sqlite3"
    dsn: ""
    max_open_conns: 25
    max_idle_conns: 5
    conn_max_lifetime: 300s
    conn_max_idle_time: 300s
  options: {}

security:
  # Set to true to enable API key authentication.
  # When enabled, set UPDATER_BOOTSTRAP_KEY to seed the first admin key.
  # Subsequent keys are managed via the REST API (/api/v1/admin/keys).
  enable_auth: false

logging:
  level: "info"  # debug, info, warn, error
  format: "json"  # json, text
  output: "stdout"  # stdout, stderr, file
  # file_path: "/var/log/updater.log"  # Required when output is "file"
  max_size: 100    # Max size in MB before rotation
  max_backups: 3   # Max number of backup files
  max_age: 28      # Max age in days
  compress: true

cache:
  enabled: true
  type: "memory"  # memory, redis
  ttl: 300s

  # Redis configuration (when using redis cache)
  redis:
    addr: "localhost:6379"
    password: ""
    db: 0
    pool_size: 10

  # Memory cache configuration
  memory:
    max_size: 1000
    cleanup_interval: 600s

metrics:
  enabled: true
  path: "/metrics"
  port: 9090